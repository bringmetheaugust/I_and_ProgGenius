# Позиція на Full-Stack Developer в ProgGenius

Лампове завдання. Дякую, навіть якщо воно вам не сподобається.  
Доступний за посиланням: [тут](http://localhost:3000) після розгортування.

## Як запустит проект?

###### Потрібно NodeJS ~20.\* та npm ~8. Ці версії також "зашиті" в конфігурацію package.json(поле `engines`)

-   встановити залежності в **app/client** через `npm i`
-   встановити залежності в **app/server** через `npm i`
-   запустити контейнера через `docker compose up --build -d`

## Реалізована логіка оптимізації на стороні сервера

-   при отримані даних по WS всі повідомлення не одразу записуються в базу, а "накопичуються" в буфері (`bufferTime` від RxJS)
    деякий час. в файлі `./app/server/src/app.gateway.ts` виніс timeout для буфера в зміну `BUFFER_TIMEOUT` для регуляювання,
    так як треба уточнити на скільки висока частота запитів по сокету. чим вища чистота, тим більше треба збільшувати timeOut.
-   накопичений буфер за допомогою однієї транзакції зберігається в базі, щоб не спамити базу.
-   можна одразу розсилати свіжі повідомлення по WS всім (буфер чи кожне повідомлення), не дочекавшись запису в DB,
    але залишив надійний варіант.
-   оптимізувати зчитання з бази немає як, бо колонка `keyName` і так являється `primary key` (індекс). якби у кожної клавіші
    був унікальний `id`, то ми б могли використовувати `id` як `primary key`, а колонку `keyName` індексувати через ключ
    `Hash` для швидкого пошуку по назві клавіші.
-   для зчитування можна було б ще погратись з **Redis** або **node-lru-cache**, але в завдані таких умов не було. Ідея
    б закючалась в тому щоб кешувати останю статистику, поки не приходять нові повідомлення.

## Уточнення до результату

-   На фронті в FSD прибрав `slices` щоб було меньше папок, так як слайс тут один.

-   саме з **MobX** я багато не працював. Маю значніший досвід з **ReactQuery(аля TanStackQuery)/Redux vanila/RTK/SWR**,
    але проблем з **MobX** не буде.

-   на клієнтській стороні намагався не використовувати UI/model бібліотеки окрім тих, що вказані в завданні.

-   в завданні вказано помістити `.env` в **app/server**, але моя конфігурація також прокидує ці змінні в контейнер з базою,
    тож файл `.env`знаходиться в корні прокта. якщо так важливо його знаходження в **app/server**, то можна перемістити
    його туди та запускати проект за допомогою`docker compose up -d --env-file ./app/server/.env`

## Дякую за увагу.
